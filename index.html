<!DOCTYPE html>
<!-- MDN 재단의 '순수한 자바스크립트를 이용한 2D 벽돌깨기 게임' 문서 참조
https://developer.mozilla.org/ko/docs/Games/Tutorials/%EC%88%9C%EC%88%98%ED%95%9C_%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC_%EC%9D%B4%EC%9A%A9%ED%95%9C_2D_%EB%B2%BD%EB%8F%8C%EA%B9%A8%EA%B8%B0_%EA%B2%8C%EC%9E%84 -->

<html>

  <head>
    <meta charset="utf-8">
    <title>Gamedev Canvas Workshop</title>
    <style>
      * {
        padding:0; margin:0;
      }
      /* * 선택자는 모든 element를 대상으로 함 */
      canvas {
        background: #eee;
        display: block;
        margin: 0 auto;
      }
    </style>
  </head>

  <body>
    <canvas id="myCanvas" width="800" height="600">
      <!-- canvas 태그는 게임이 렌더되는 공간을 생성 -->
    </canvas>

    <script>
      // JavaScript 코드를 작성하는 위치. 대문자/소문자 구분 잘할 것.
      var canvas = document.getElementById("myCanvas");
      // canvas 변수에 <canvas> element에 대한 참조를 저장
      var ctx = canvas.getContext("2d");
      // ctx 변수에 캔버스에 그리는 데 사용되는 도구인 2D rendering context를 저장

      var x = canvas.width/2;
      var y = canvas.height-30;

      var dx = 2;
      var dy = -2;

      var ballRadius = 10;

      var colorArray = ["#0066CC", "#66FF99", "#FF9900", "#CC66FF"];
      var randomcolor = colorArray[Math.floor(Math.random() * colorArray.length)];
      // 색상 랜덤변환 : Stackoverflow 참고 https://stackoverflow.com/questions/4550505/getting-a-random-value-from-a-javascript-array

      function drawBall() {
        ctx.beginPath();
        ctx.arc(x, y, ballRadius, 0, Math.PI*2);
        ctx.fill();
        ctx.closePath();
      }

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawBall();
        x += dx;
        y += dy;

        if (x + dx > canvas.width-ballRadius || x + dx < ballRadius) {
          dx = -dx;
        }
        if (y + dy > canvas.height-ballRadius || y + dy < ballRadius) {
          dy = -dy;
        }
        if (x + dx == canvas.width-ballRadius || x + dx == ballRadius || y + dy == canvas.height-ballRadius || y + dy == ballRadius) {
          ctx.fillStyle = colorArray[Math.floor(Math.random() * colorArray.length)];
        }
        // || 논리 연산자는 3개 이상의 항목도 적용 가능
        // ctx.fillStyle = randomcolor로 작성하면 최초 1회만 변경됨. 이 부분에 대한 추가 확인이 필요할 듯
      }

      ctx.fillStyle = "#000000";
      setInterval(draw, 10);
      // setinterval(a,b) : a 함수를 b 간격(단위 ms : 1/1000초)으로 반복실행

    </script>
  </body>
</html>
